(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0f2c":function(e,t,i){"use strict";var a=i("5d70");i.n(a).a},1565:function(e,t,i){"use strict";(function(e){i("c975");var a=i("e920");t.a={name:"indexHeader",components:{addScreenDrawer:a.a},data:function(){return{defLeftTabs:[{key:"myFolder",name:this.$t("dataExplore.mine"),icon:"myfolder"},{key:"sharedFolder",name:this.$t("dataExplore.shared"),icon:"sharedFolder"},{key:"modelFun",name:this.$t("dataExplore.modelFun"),icon:"template"},{key:"recycleBin",name:this.$t("dataExplore.recycleBin"),icon:"recycle"}],lang:localStorage.getItem("semf_lang"),drawerVisible:!1}},props:{activeTab:{type:String},switchIconsShow:{type:Boolean,default:!0},onlyIconsShow:{type:Boolean,default:!0},leftTabs:{type:Array},leftMenuShow:{type:Boolean},leftNavShow:{type:Boolean},rightIconsShow:{type:Boolean},rightRecycleBtnShow:{type:Boolean},fathersList:{type:Array},fieldObj:{type:Object}},computed:{computedLeftTabs:function(){return e.extend(!0,[],this.defLeftTabs,this.leftTabs)},computedRightIcons:function(){var e=[];return e=[{key:"refresh",name:this.$t("dataExplore.refresh"),icon:"refresh",show:!0},{key:"cross",name:this.$t("dataExplore.showTile"),icon:"app-cross-sort",show:this.switchIconsShow},{key:"list",name:this.$t("dataExplore.showList"),icon:"app-list",show:this.switchIconsShow},{key:"sort",name:this.$t("dataExplore.sort"),icon:"sortaz",show:!0}],-1!==this.$moduleRole.indexOf("design")&&(e.push({key:"newFolder",name:this.$t("dataExplore.newFolder"),icon:"newfolder",show:this.onlyIconsShow}),e.push({key:"uploadReport",name:this.$t("dataExplore.uploadReport"),icon:"shangchuan-",show:this.onlyIconsShow||!this.switchIconsShow})),-1!==this.$moduleRole.indexOf("model")&&e.push({key:"model",name:this.$t("design.designModel"),icon:"model",show:this.onlyIconsShow}),e}},methods:{clickRightIcons:function(e){this.$emit("clickRightIcons",{tab:e})},cleanFileClick:function(){this.$emit("cleanFileClick")},restoreFileClick:function(){this.$emit("restoreFileClick")},enterFile:function(e,t){this.$emit("clickLeftNav",{item:e,event:t})},returnToPrivateFirst:function(){this.$emit("returnToPrivateFirst")},changeTab:function(e){this.$emit("clickLeftTab",{tab:e})},openDrawer:function(){this.$refs.addScreen.getTemplate(),this.drawerVisible=!0},closeDrawer:function(){this.drawerVisible=!1}}}}).call(this,i("1157"))},2074:function(e,t,i){"use strict";var a=i("c4f5");i.n(a).a},"20e4":function(e,t,i){},2347:function(e,t,i){},"2e33":function(e,t,i){"use strict";var a=i("e95d");i.n(a).a},"2ec0":function(e,t,i){"use strict";var a=i("7701");i.n(a).a},"31e4":function(e,t,i){"use strict";var a=i("20e4");i.n(a).a},"4b9f":function(e,t,i){"use strict";(function(e){var a=i("a116");t.a={components:{basicInfo:a.a},name:"chooseScreen",data:function(){return{curScreen:{text:"大屏",value:"daping"},curDropDown:"",dropDownData:{dataSource:[],showKey:"screen_name",idKey:"screen_id",dropdownStyle:{},returnJson:!0},urls:{screenList:"/report/screen/list"}}},methods:{getData:function(){var e={},t=this.$refs.csBasicinfo.getData();return e.screenId=this.curScreen[this.dropDownData.idKey],e.screenName=this.curScreen[this.dropDownData.showKey],e.basicAttr=JSON.stringify(t),e},showScreenDropDown:function(t,i){if(this.curDropDown===i)this.curDropDown="";else{this.curDropDown="screen";var a=e.extend(!0,{},this.dropDownData);a.dataSource?this.showDropDown(a):this.$http({url:this.urls.screenList,method:"get"}).then((function(e){e.data&&e.data.data&&(a.dataSource=e.data.data)})).catch((function(e){}))}}},created:function(){var e=this;e.$http({url:this.urls.screenList,method:"get"}).then((function(t){t.data&&t.data.data&&(e.dropDownData.dataSource=t.data.data,e.curScreen=t.data.data[0])}))}}}).call(this,i("1157"))},"5a4e":function(e,t,i){},"5d70":function(e,t,i){},"616e":function(e,t,i){"use strict";var a=i("a9f1");i.n(a).a},6511:function(e,t,i){"use strict";i.r(t);var a=i("5530"),o=i("2f62"),r=i("e083").a,s=(i("31e4"),i("2ec0"),i("2877")),n={name:"dataexplore",components:{folderReportIndexCom:Object(s.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loadingLinear",rawName:"v-loadingLinear",value:e.loadingSet,expression:"loadingSet"}],staticClass:"allShowIndex"},[i("header-com",{attrs:{leftMenuShow:e.leftMenuShow,leftNavShow:e.leftNavShow,rightRecycleBtnShow:"recycleBin"===e.currentTab,rightIconsShow:"recycleBin"!==e.currentTab,switchIconsShow:"recycleBin"!==e.currentTab&&!!e.curFolder[e.fieldObj.pid],onlyIconsShow:"modelFun"!==e.currentTab,fathersList:e.fathersList,fieldObj:e.fieldObj,activeTab:e.currentTab},on:{clickLeftTab:e.clickLeftTab,clickRightIcons:e.clickRightIcons,returnToPrivateFirst:e.returnToPrivateFirst,clickLeftNav:e.clickLeftNav,restoreFileClick:e.restoreFileClick,cleanFileClick:e.cleanFileClick}}),i("div",{staticClass:"downContent",on:{click:function(t){return t.stopPropagation(),e.clearClickEvent(t)}}},[i("nanoscrollerComponent",{attrs:{properties:{height:"100%",axis:"y",width:"100%",isRefresh:!0}}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:!e.showInList||"recycleBin"===e.currentTab,expression:"!showInList || currentTab === 'recycleBin'"}],staticClass:"fileBlock"},[i("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",value:""},on:{change:e.onUpload}}),i("input",{ref:"fileReportInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".canvas",value:""},on:{change:e.onReportUpload}}),e._l(e.filesShowArray,(function(t){return i("li",{key:t.pkid,staticClass:"fileFlatShow",class:{choosed:e.curChoosedFiles.includes(t),reportItem:t[e.fieldObj.type]&&t[e.fieldObj.type].includes("report")}},[i("el-popover",{attrs:{"visible-arrow":!1,trigger:e.getIcons(t).length?"hover":void 0,placement:"right-start","popper-class":"fileFlatPop"}},[i("div",{staticClass:"fileFlatWrapper",attrs:{slot:"reference"},slot:"reference"},[i("span",{directives:[{name:"show",rawName:"v-show",value:"recycleBin"!==e.currentTab&&e.showInList,expression:"currentTab !== 'recycleBin' && showInList"}],staticClass:"toggleInList"}),i("div",{staticClass:"imgWrapper"},[i("img",{directives:[{name:"show",rawName:"v-show",value:!e.showInList||"recycleBin"===e.currentTab,expression:"!showInList || currentTab === 'recycleBin'"},{name:"lazy",rawName:"v-lazy",value:t.imgObj,expression:"file.imgObj"}],key:t.imgObj.src,class:(t[e.fieldObj.type]&&t[e.fieldObj.type].split("_")[1],"thumbnailReport"),attrs:{title:t[e.fieldObj.name]},on:{click:function(i){return i.stopPropagation(),e.enterFile(t,i)}}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.changeNameValue[t[e.fieldObj.type]&&t[e.fieldObj.type].split("_")[1]],expression:"changeNameValue[file[fieldObj.type] && file[fieldObj.type].split('_')[1]]"},{name:"show",rawName:"v-show",value:e.isSomeIconShow(t,"delete")&&e.isFocus&&e.changeNameFile[e.fieldObj.id]===t[e.fieldObj.id],expression:"isSomeIconShow(file, 'delete') && isFocus && changeNameFile[fieldObj.id] === file[fieldObj.id]"}],staticClass:"fileName showBorder",class:{errorBorder:e.changeNameFile[e.fieldObj.id]===t[e.fieldObj.id]&&e.changeNameError},attrs:{type:"text",maxlength:"50",onfocus:"this.select();"},domProps:{value:e.changeNameValue[t[e.fieldObj.type]&&t[e.fieldObj.type].split("_")[1]]},on:{blur:function(i){return i.stopPropagation(),e.blurChangedName(t,i)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.pressEnter(t))},input:[function(i){i.target.composing||e.$set(e.changeNameValue,t[e.fieldObj.type]&&t[e.fieldObj.type].split("_")[1],i.target.value)},function(t){return e.lengthLimit(t)}],compositionstart:function(t){return e.lengthComposition("start",t)},compositionend:function(t){return e.lengthComposition("end",t)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!(e.isSomeIconShow(t,"delete")&&e.isFocus&&e.changeNameFile[e.fieldObj.id]===t[e.fieldObj.id]),expression:"!(isSomeIconShow(file, 'delete') && isFocus && changeNameFile[fieldObj.id] === file[fieldObj.id])"}],staticClass:"fileName",class:t[e.fieldObj.type]&&t[e.fieldObj.type].includes("report")?"report-fileName":"",attrs:{title:t[e.fieldObj.name]},on:{dblclick:function(i){return i.stopPropagation(),e.startChangeFileName(i,t)}}},[t[e.fieldObj.type]&&t[e.fieldObj.type].includes("report")?i("i",{staticClass:"icon iconfont",class:"screen"===t.classify?"icon-mark_screen":"icon-mark_report"}):e._e(),e._v(" "+e._s(t[e.fieldObj.name])+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.changeNameFile[e.fieldObj.id]===t[e.fieldObj.id]&&e.changeNameError,expression:"changeNameFile[fieldObj.id] === file[fieldObj.id] && changeNameError"}],staticClass:"validateErrorTip"},[e._v(e._s(e.changeNameError))]),i("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"showId"},[e._v(e._s(t[e.fieldObj.id]))])]),e.getIcons(t).length?i("ul",{staticClass:"iconWrapper"},e._l(e.getIcons(t),(function(t,a){return i("li",{key:a,staticClass:"icon-item",on:{click:function(e){return t.click()}}},[i("i",{class:t.class}),e._v(" "+e._s(t.title)+" ")])})),0):e._e()])],1)}))],2),i("listTreeCom",{directives:[{name:"show",rawName:"v-show",value:"recycleBin"!==e.currentTab&&e.showInList,expression:"currentTab !== 'recycleBin' && showInList"}],attrs:{sourceData:e.filesArray,treeT:{id:e.fieldObj.id,name:e.fieldObj.name,pId:e.fieldObj.pid,initID:e.curFolder[e.fieldObj.id],type:e.fieldObj.type,sign:e.fieldObj.sign},isTrans:!0,isFocus:e.isFocus,changeNameFile:e.changeNameFile,changeNameValue:e.changeNameValue,changeNameError:e.changeNameError},on:{delModel:e.delModelFolder,changeModel:e.startChangeFileName,changeModelBlur:e.blurChangedName,singleChoosed:e.getListChoosed}})],1)],1),i("modal",{attrs:{properties:e.popWindowOpt},on:{afterClickButton:e.handlePopWindow}},[i("div",{attrs:{slot:"windowBody"},slot:"windowBody"},[i("div",{staticClass:"new-folder-modal"},[i("div",{staticClass:"iconBox"},[i("i",{staticClass:"icon iconfont icon-newfolder"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newFolderName,expression:"newFolderName"},{name:"focusS",rawName:"v-focusS"}],staticClass:"new-folder",attrs:{type:"text",maxlength:"50",onfocus:"this.select();"},domProps:{value:e.newFolderName},on:{compositionstart:function(t){return e.lengthComposition("start",t)},compositionend:function(t){return e.lengthComposition("end",t)},input:[function(t){t.target.composing||(e.newFolderName=t.target.value)},function(t){return e.lengthLimit(t)}],focus:function(t){return t.stopPropagation(),e.reNewFolder(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.askForNewFolder(t))}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.newFolderName,expression:"!newFolderName"}],staticClass:"validateErrorTip"},[e._v(e._s(e.emptyNewName))]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.newFolderError,expression:"newFolderError"}],staticClass:"validateErrorTip"},[e._v(e._s(e.newFolderError))])])])]),e.addScreen?i("addScreen",{attrs:{report:e.curItem},on:{toggleBigScreen:e.toggleBigScreen}}):e._e()],1)}),[],!1,null,"54e97af5",null).exports},data:function(){return{showAll:!1,popWindowOpt:{type:"alert",content:this.$t("authority.noAuthority"),show:!1}}},computed:Object(a.a)({},Object(o.d)({dropDownOpt:function(e){return e.dropDownOpt}})),mounted:function(){this.showAll=!0},methods:Object(a.a)(Object(a.a)({},Object(o.b)({hideDropDown:"hideDropDown",changeDropDownSelected:"changeDropDownSelected"})),{},{handlePopWindow:function(e){"confirm"===e.type&&(this.popWindowOpt.show=!1)},hideSomething:function(){this.dropDownOpt.isShow&&this.hideDropDown()}})},l=(i("d4bc"),Object(s.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dataexplore",attrs:{id:"dataexplore"},on:{click:this.hideSomething}},[this.showAll?t("div",{staticClass:"dataexplore-main"},[t("folderReportIndexCom")],1):this._e(),t("modal",{attrs:{properties:this.popWindowOpt},on:{afterClickButton:this.handlePopWindow}})],1)}),[],!1,null,"dd42ed48",null));t.default=l.exports},7701:function(e,t,i){},"7b17":function(e,t,i){e.exports=i.p+"img/img-report.3865a89e.png"},"96a4":function(e,t,i){"use strict";var a=i("2347");i.n(a).a},9974:function(e,t,i){"use strict";var a=i("cf34");i.n(a).a},a116:function(e,t,i){"use strict";i("ac1f"),i("5319");var a={name:"basicInfo",data:function(){return{curSelect:{},curKey:"",unitParams:{second:this.$t("dataExplore.second"),minute:this.$t("dataExplore.minute"),hour:this.$t("dataExplore.hour")},dropDownData:{Unit:{dataSource:[{text:this.$t("dataExplore.second"),value:"second"},{text:this.$t("dataExplore.minute"),value:"minute"},{text:this.$t("dataExplore.hour"),value:"hour"}],showKey:"text",idKey:"value",dropdownStyle:{border:"none"}},Time:{dataSource:[{text:"0",value:0},{text:"5",value:5},{text:"10",value:10},{text:"15",value:15},{text:"20",value:20},{text:"25",value:25},{text:"30",value:30}],showKey:"text",idKey:"value",dropdownStyle:{width:"70px"}},Effect:{dataSource:[{type:"moveLeft",text:this.$t("dataExplore.largeScreen.moveLeft")},{type:"moveRight",text:this.$t("dataExplore.largeScreen.moveRight")},{type:"moveUp",text:this.$t("dataExplore.largeScreen.moveUp")},{type:"moveDown",text:this.$t("dataExplore.largeScreen.moveDown")}],showKey:"text",idKey:"type",dropdownStyle:{width:"100px"}}},finalData:{loadTime:5,loadTimeUnit:"second",stayTime:15,stayUnit:"second",animationTime:300,animationEffect:"moveRight"}}},watch:{},methods:{getData:function(){return this._.cloneDeep(this.finalData)},numKeyDown:function(e){110!==e.keyCode&&190!==e.keyCode||!/\./.test(e.target.value)||e.preventDefault()},numOnInput:function(e,t){var i=e.target.value;if(/[^\d.]/.test(i)){var a=this.getCursorPosition(e.target);"stayTime"===t?this.finalData.stayTime=i.replace(/[^\d.]/g,""):this.finalData.animationTime=i.replace(/[^\d.]/g,""),this.setCursorPosition(e.target,a-1)}},getCursorPosition:function(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"===e.selectionStart)&&(t=e.selectionStart);return t},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}}},o=(i("fe7d"),i("2877")),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"as-screen-split"},[i("span",{staticClass:"split"}),i("span",{staticClass:"text"},[e._v(e._s(e.$t("dataExplore.basicInfo")))]),i("span",{staticClass:"split"})]),i("div",{staticClass:"as-screen-info"},[i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.stayTime")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.finalData.stayTime,expression:"finalData.stayTime"}],staticClass:"input",domProps:{value:e.finalData.stayTime},on:{keydown:function(t){return e.numKeyDown(t)},input:[function(t){t.target.composing||e.$set(e.finalData,"stayTime",t.target.value)},function(t){return e.numOnInput(t,"stayTime")}]}}),i("span",{staticClass:"design dropdown-contain",style:"zh"===e.$i18n.locale?{}:{width:"85px !important"}},[i("dropdown",{attrs:{configs:e.dropDownData.Unit},model:{value:e.finalData.stayUnit,callback:function(t){e.$set(e.finalData,"stayUnit",t)},expression:"finalData.stayUnit"}})],1)]),i("div",{staticClass:"as-screen-info"},[i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.loadTime")))]),i("dropdown",{attrs:{configs:e.dropDownData.Time},model:{value:e.finalData.loadTime,callback:function(t){e.$set(e.finalData,"loadTime",t)},expression:"finalData.loadTime"}}),i("span",{staticClass:"design dropdown-contain",style:"zh"===e.$i18n.locale?{}:{width:"85px !important"}},[i("dropdown",{attrs:{configs:e.dropDownData.Unit},model:{value:e.finalData.loadTimeUnit,callback:function(t){e.$set(e.finalData,"loadTimeUnit",t)},expression:"finalData.loadTimeUnit"}})],1)],1),i("div",{staticClass:"as-screen-info-text"},[e._v(e._s(e.$t("dataExplore.info")))]),i("div",{staticClass:"as-screen-info"},[i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.animationEffect")))]),i("dropdown",{staticStyle:{"margin-right":"5px"},attrs:{configs:e.dropDownData.Effect},model:{value:e.finalData.animationEffect,callback:function(t){e.$set(e.finalData,"animationEffect",t)},expression:"finalData.animationEffect"}}),i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.animationTime")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.finalData.animationTime,expression:"finalData.animationTime"}],staticClass:"input",domProps:{value:e.finalData.animationTime},on:{keydown:function(t){return e.numKeyDown(t)},input:[function(t){t.target.composing||e.$set(e.finalData,"animationTime",t.target.value)},function(t){return e.numOnInput(t,"animationTime")}]}}),i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.animationTimeSecond")))])],1),i("div",{staticClass:"as-screen-info"})])}),[],!1,null,"4367f908",null);t.a=r.exports},a9f1:function(e,t,i){},aabe:function(e,t,i){e.exports=i.p+"img/img-folder.21f6c539.png"},aba3:function(e,t,i){"use strict";var a=i("1565").a,o=(i("9974"),i("2877")),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upMenu"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.leftMenuShow,expression:"leftMenuShow"}],staticClass:"upMenuLeft"},e._l(e.computedLeftTabs,(function(t,a){return i("btn",{key:"leftTab"+a,attrs:{type:e.activeTab===t.key?"primary":"default",icon:t.icon},on:{click:function(){return e.changeTab(t.key)}}},[e._v(e._s(t.name))])})),1),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.leftNavShow,expression:"leftNavShow"}],staticClass:"upMenuLeft nav"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("dataExplore.return"),expression:"$t('dataExplore.return')",modifiers:{bottom:!0}}],staticClass:"btn iconfont icon-left-arrow",on:{click:function(t){return t.stopPropagation(),e.returnToPrivateFirst(t)}}}),e._l(e.fathersList,(function(t,a){return i("span",{key:"nav"+a,staticClass:"btn navName",on:{click:function(i){return i.stopPropagation(),e.enterFile(t,i)}}},[e._v(" "+e._s(0===a&&"en"===e.lang?t.model_flname:t[e.fieldObj.name])+" "),i("span",{directives:[{name:"show",rawName:"v-show",value:a!==e.fathersList.length-1,expression:"$index !== fathersList.length - 1"}],staticClass:"btn nextLevel"},[i("i",{staticClass:"iconfont icon-hidedrop"})])])}))],2),i("div",{directives:[{name:"show",rawName:"v-show",value:e.rightIconsShow,expression:"rightIconsShow"}],staticClass:"upMenuRight"},[-1!==e.$moduleRole.indexOf("design")&&e.onlyIconsShow?i("btn",{attrs:{icon:"add-screen"},on:{click:this.openDrawer}},[e._v(" "+e._s(e.$t("dataExplore.largeScreenProduction"))+" ")]):e._e(),-1!==e.$moduleRole.indexOf("design")&&e.onlyIconsShow?i("btn",{staticClass:"new-report",attrs:{icon:"add-report"},on:{click:function(){return e.clickRightIcons("newReport")}}},[e._v(" "+e._s(e.$t("dataExplore.newReport"))+" ")]):e._e(),e._l(e.computedRightIcons,(function(t,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"},{name:"tooltip",rawName:"v-tooltip.bottom",value:t.name,expression:"item.name",modifiers:{bottom:!0}}],key:a,staticClass:"iconModelWrap",on:{click:function(i){return i.stopPropagation(),e.clickRightIcons(t.key)}}},[i("span",{key:"icon"+a,staticClass:"iconfont iconmodel",class:["icon-"+t.icon]})])}))],2),i("div",{directives:[{name:"show",rawName:"v-show",value:e.rightRecycleBtnShow,expression:"rightRecycleBtnShow"}],staticClass:"upMenuRight upMenuRightBtn"},[i("btn",{attrs:{icon:"restore"},on:{click:e.restoreFileClick}},[e._v(" "+e._s(e.$t("dataExplore.restore"))+" ")]),i("btn",{attrs:{icon:"clean"},on:{click:e.cleanFileClick}},[e._v(" "+e._s(e.$t("dataExplore.clear"))+" ")])],1),i("addScreenDrawer",{ref:"addScreen",attrs:{openDrawer:e.openDrawer,closeDrawer:e.closeDrawer,drawerVisible:e.drawerVisible}})],1)}),[],!1,null,"596ad4aa",null);t.a=r.exports},b69c:function(e,t,i){"use strict";var a=i("f23a").a,o=(i("616e"),i("2877")),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"listTree"},e._l(e.treeData,(function(t,a){return i("li",{key:"li"+a,staticClass:"singleList"},[i("div",{staticClass:"showNode",class:{choosed:e.trueChoosed&&e.trueChoosed[e.defaultTreeT.id]===t[e.defaultTreeT.id]}},[i("div",{staticClass:"toggleBlock",on:{click:function(i){return i.stopPropagation(),e.toggle(t)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t[e.defaultTreeT.type]&&t[e.defaultTreeT.type].includes("folder"),expression:"\n            model[defaultTreeT.type] &&\n              model[defaultTreeT.type].includes('folder')\n          "}],staticClass:"toggleClose",class:{toggleOpen:e.trueOpenName.length>0&&e.trueOpenName.includes(t[e.defaultTreeT.id])}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!(e.isFocus&&e.changeNameFile&&e.changeNameFile[e.defaultTreeT.id]===t[e.defaultTreeT.id]),expression:"\n          !(\n            isFocus &&\n            changeNameFile &&\n            changeNameFile[defaultTreeT.id] === model[defaultTreeT.id]\n          )\n        "}],staticClass:"node",on:{click:function(i){return i.stopPropagation(),e.toggle(t,"node")},dblclick:function(i){return i.stopPropagation(),e.startChangeName(t)}}},[e._v(e._s(t[e.defaultTreeT.name]))]),e.isFocus&&e.changeNameFile&&e.changeNameFile[e.defaultTreeT.id]===t[e.defaultTreeT.id]?i("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.trueChangeNameValue[t[e.defaultTreeT.type].split("_")[1]],expression:"trueChangeNameValue[model[defaultTreeT.type].split('_')[1]]"}],staticClass:"changeNameInput",class:{errorBorder:e.isFocus&&e.changeNameFile&&e.changeNameFile[e.defaultTreeT.id]===t[e.defaultTreeT.id]&&e.changeNameError},attrs:{type:"text"},domProps:{value:e.trueChangeNameValue[t[e.defaultTreeT.type].split("_")[1]]},on:{blur:function(i){return i.stopPropagation(),e.changedNameBlur(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.target.blur())},input:function(i){i.target.composing||e.$set(e.trueChangeNameValue,t[e.defaultTreeT.type].split("_")[1],i.target.value)}}}):e._e(),e.isFocus&&e.changeNameFile&&e.changeNameFile[e.defaultTreeT.id]===t[e.defaultTreeT.id]&&e.changeNameError?i("div",{staticClass:"changeNameError",attrs:{type:"text"}},[e._v(e._s(e.changeNameError))]):e._e(),i("div",{staticClass:"iconsBlock"},[-1===e.$moduleRole.indexOf("design")&&-1===e.$moduleRole.indexOf("model")||!t[e.defaultTreeT.type]||!t[e.defaultTreeT.type].includes("report")||t[e.defaultTreeT.type].includes("share")&&"s"===t[e.defaultTreeT.sign]||t[e.defaultTreeT.type].includes("template")&&"s"===t[e.defaultTreeT.sign]?e._e():i("span",{staticClass:"iconfont icon-edit",on:{click:function(i){return i.stopPropagation(),e.editMyReport(t,!1)}}}),-1===e.$moduleRole.indexOf("design")&&-1===e.$moduleRole.indexOf("model")||t[e.defaultTreeT.type]&&t[e.defaultTreeT.type].includes("share")&&"s"===t[e.defaultTreeT.sign]||t[e.defaultTreeT.type]&&t[e.defaultTreeT.type].includes("template")&&"s"===t[e.defaultTreeT.sign]?e._e():i("span",{staticClass:"iconfont icon-close",on:{click:function(i){return i.stopPropagation(),e.delModel(t)}}})])]),t.children.length>0?i("listtree",{directives:[{name:"show",rawName:"v-show",value:e.trueOpenName.length>0&&e.trueOpenName.includes(t[e.defaultTreeT.id]),expression:"\n        trueOpenName.length > 0 &&\n          trueOpenName.includes(model[defaultTreeT.id])\n      "}],attrs:{sourceData:t.children,treeT:e.treeT,isTrans:!1,toNext:{openName:e.trueOpenName,choosed:e.trueChoosed},isFocus:e.isFocus,changeNameFile:e.changeNameFile,changeNameValue:e.changeNameValue,changeNameError:e.changeNameError},on:{getFromNextData:e.getFromNextData}}):e._e()],1)})),0)}),[],!1,null,"6da725a6",null);t.a=r.exports},c4f5:function(e,t,i){},cf34:function(e,t,i){},d4bc:function(e,t,i){"use strict";var a=i("5a4e");i.n(a).a},d53e:function(e,t,i){"use strict";var a=i("5530"),o=i("2f62"),r=i("4b9f").a,s=(i("96a4"),i("2877")),n=Object(s.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"change-screen-title"},[i("span",{staticClass:"text"},[e._v(e._s(e.$t("dataExplore.select")))]),i("span",{staticClass:"design"},[i("dropdown",{attrs:{configs:e.dropDownData},model:{value:e.curScreen,callback:function(t){e.curScreen=t},expression:"curScreen"}})],1)]),i("basicInfo",{ref:"csBasicinfo"})],1)}),[],!1,null,"0c707087",null).exports,l=(i("4160"),i("ac1f"),i("5319"),i("159b"),{data:function(){return{ratio:"16:9",ratios:[{width:16,height:9,text:"16:9",value:"16:9"},{width:16,height:10,text:"16:10",value:"16:10"},{width:1,height:1,text:"1:1",value:"1:1"},{width:1,height:1,value:"custom",text:this.$t("dataExplore.customSize")}],height:100,curSize:"32",curDropDown:"",dropDownData:{dataSource:[{text:"32",value:"32"},{text:"42",value:"42"},{text:"50",value:"50"},{text:"55",value:"55"},{text:"60",value:"60"},{text:"65",value:"65"},{text:"100",value:"100"}],showKey:"text",idKey:"value",dropdownStyle:{width:"65px"}},orient:"horizontal",orientation:[{value:"horizontal",text:this.$t("dataExplore.landscape")},{value:"vertical",text:this.$t("dataExplore.portrait")}],screenName:"",customRadio:[{value:"height",text:this.$t("dataExplore.height")},{value:"width",text:this.$t("dataExplore.width")}],size:{height:2e3,width:2e3}}},components:{basicInfo:i("a116").a},computed:{ratioStyle:function(){var e=this,t=[];return this.ratios.forEach((function(i){var a=e._.cloneDeep(i),o={};o.height=e.height+"px",o.lineHeight=e.height+"px",o.width="custom"===i.value?"120px":e.height/i.height*i.width+"px",a.style=o,t.push(a)})),t}},methods:{getData:function(){var e=this.screenName,t=this.ratio,i=this.curSize,a=this.size;if(!e)return this.$notify({group:"foo-dataexporler",title:this.$t("public.warnInfo"),text:this.$t("dataExplore.screenNameCheck"),type:"warn"}),!1;var o={},r=this.$refs.nsBasicinfo.getData();o.screenAttribute=JSON.stringify({animationTime:"300",animationMode:"circulation",animationEffect:"moveLeft"}),o.basicAttr=JSON.stringify(r);var s={type:t,size:i,width:a.width,height:a.height};return o.screenFormat=JSON.stringify(s),o.screenName=e,o},operateRadio:function(e,t,i){this.size[e]=t?"minus"===t?parseInt(this.size[e])>1?parseInt(this.size[e])-2:parseInt(this.size[e]):parseInt(this.size[e])<999998?parseInt(this.size[e])+2:parseInt(this.size[e]):i.target.value},toggle:function(e,t){this[e]=t},changeName:function(e){this.screenName=e.target.value},numOnInput:function(e){var t=e.target.value;if(/[^\d]/.test(t)){var i=this.getCursorPosition(e.target);e.target.value=t.replace(/[^\d]/g,""),this.setCursorPosition(e.target,i-1)}},getCursorPosition:function(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"===e.selectionStart)&&(t=e.selectionStart);return t},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}}}),c=(i("2074"),{props:["report"],components:{chooseScreen:n,newScreen:Object(s.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ns-container"},[i("nanoscrollerComponent",{attrs:{properties:{height:"260px",axis:"y",width:"100%"}}},[i("div",[i("div",{staticClass:"ns-ratio"},[i("ul",e._l(e.ratioStyle,(function(t){return i("li",{staticClass:"ratio-li",class:{curRatio:t.value===e.ratio},style:t.style,on:{click:function(i){return e.toggle("ratio",t.value)}}},[e._v(e._s(t.text))])})),0)]),i("div",{staticClass:"ns-ratio-content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"custom"!==e.ratio,expression:"ratio !== 'custom'"}],staticClass:"row"},[i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.screenSize")))]),i("dropdown",{attrs:{configs:e.dropDownData},model:{value:e.curSize,callback:function(t){e.curSize=t},expression:"curSize"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.ratio,expression:"ratio === 'custom'"}],staticClass:"row"},[i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.screenSize")))]),i("div",{staticClass:"custom-radio"},e._l(e.customRadio,(function(t){return i("span",{staticClass:"radio-span"},[i("span",{staticClass:"title"},[e._v(e._s(t.text))]),i("span",{staticClass:"radio-content"},[i("span",{staticClass:"iconfont icon-app-arrow-left",on:{click:function(i){return e.operateRadio(t.value,"minus")}}}),i("input",{staticClass:"radio-input",attrs:{maxlength:"6"},domProps:{value:e.size[t.value]},on:{change:function(i){return e.operateRadio(t.value,"",i)},input:function(t){return e.numOnInput(t)}}}),i("span",{staticClass:"iconfont icon-app-arrow-right",on:{click:function(i){return e.operateRadio(t.value,"add")}}})])])})),0)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"16:9"===e.ratio||"16:10"===e.ratio,expression:"ratio === '16:9' || ratio === '16:10'"}],staticClass:"row"},[i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.screenOrient")))]),i("ul",{staticClass:"input orient inputdropdown"},e._l(e.orientation,(function(t){return i("li",{key:t.value,staticClass:"orient-li",on:{click:function(i){return e.toggle("orient",t.value)}}},[i("span",{staticClass:"iconfont",class:t.value===e.orient?"icon-radio-selected":"icon-radio-unselected"}),i("span",[e._v(e._s(t.text))])])})),0)]),i("div",{staticClass:"row"},[i("span",{staticClass:"title"},[e._v(e._s(e.$t("dataExplore.screenName")))]),i("input",{staticClass:"name-input",domProps:{value:e.screenName},on:{change:e.changeName}})])])]),i("basicInfo",{ref:"nsBasicinfo",staticClass:"ns-basicInfo"})],1)],1)}),[],!1,null,"2dc81cf6",null).exports},data:function(){return{popWindowOpt:{type:"custom",head:this.$t("dataExplore.bigScreen"),confirm:this.$t("dataExplore.confirm"),cancel:this.$t("dataExplore.cancel"),show:!0,style:{width:"700px",height:"400px"}},tabParams:[{name:this.$t("dataExplore.chooseScreen"),value:"chooseScreen"},{name:this.$t("dataExplore.newScreen"),value:"newScreen"}],curTab:"chooseScreen",urls:{saveScreen:"/report/screen"}}},watch:{},computed:{},methods:Object(a.a)(Object(a.a)({},Object(o.b)({hideDropDown:"hideDropDown"})),{},{saveScreen:function(){var e=this.report,t={},i=this;e.model_id?(t.reportType="model_report",t.reportId=e.model_id):(t.reportType="share_report",t.reportId=e.share_id);var a=this.$refs[this.curTab].getData();a&&("newScreen"===this.curTab&&(t.type="new"),this._.assign(t,a),this.$http({url:this.urls.saveScreen,method:"post",data:t}).then((function(e){e.data&&e.data.data&&(i.hideDropDown(),i.$emit("toggleBigScreen",!1))})).catch((function(e){})))},handlePopWindow:function(e){"confirm"===e.type?this.saveScreen():(this.$emit("toggleBigScreen",!1),this.hideDropDown())},toggleTabs:function(e){e!==this.curTab&&(this.curTab=e.value,this.hideDropDown())}})}),d=(i("2e33"),Object(s.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("modal",{attrs:{properties:e.popWindowOpt},on:{afterClickButton:e.handlePopWindow}},[i("div",{attrs:{slot:"windowBody"},slot:"windowBody"},[i("div",{staticClass:"as-container"},[i("div",{staticClass:"as-screen-head"},[i("ul",e._l(e.tabParams,(function(t,a){return i("li",{key:t.value,staticClass:"as-tab-item",class:{asChooseTab:e.curTab===t.value},on:{click:function(i){return e.toggleTabs(t)}}},[i("span",[e._v(e._s(t.name))])])})),0)]),i("div",{staticClass:"as-screen-body"},[i("chooseScreen",{directives:[{name:"show",rawName:"v-show",value:"chooseScreen"===e.curTab,expression:"curTab === 'chooseScreen'"}],ref:"chooseScreen"}),i("newScreen",{directives:[{name:"show",rawName:"v-show",value:"newScreen"===e.curTab,expression:"curTab === 'newScreen'"}],ref:"newScreen"})],1)])])])],1)}),[],!1,null,"6acdb6cb",null));t.a=d.exports},d6a7:function(e,t,i){},e083:function(e,t,i){"use strict";(function(e){i("99af"),i("7db0"),i("c740"),i("4160"),i("caad"),i("c975"),i("a434"),i("b0c0"),i("a9e3"),i("ac1f"),i("2532"),i("5319"),i("1276"),i("498a"),i("159b");var a=i("2909"),o=i("5530"),r=i("b69c"),s=i("aba3"),n=i("d53e"),l=i("a026");t.a={name:"dataexploreShow",components:{headerCom:s.a,listTreeCom:r.a,addScreen:n.a},data:function(){return{reportUrl:"img/file_img.svg",folderUrl:"img/folder_img.svg",curItem:{},curImg:"",addScreen:!1,listChoosed:{},showInList:!1,fathersList:[],newFolderError:"",emptyNewName:this.$t("dataExplore.emptyNewFolderError"),newFolderName:this.$t("dataExplore.newFolder"),curChoosedFiles:[],changeNameError:"",isFocus:!1,changeNameFile:{},changeNameValue:{folder:"",report:""},deleteFile:{},curPopWindow:"",popWindowOpt:{type:"custom",head:this.$t("dataExplore.newFolder"),confirm:this.$t("dataExplore.confirm"),cancel:this.$t("dataExplore.cancel"),show:!1,style:{width:"300px",height:"120px"}},rootFolder:{},curFolder:{},loadingState:"",urls:{toClearRecycle:"/model/recycle",toRestoreRecycle:"/model/recycle",toReturnRecycle:"/model/recycle",addFolderUrl:"/report/folder",analysisModelUrl:"/report/folder",delResToRecycle:"/report/folder",editModelFolderUrl:"/report/folder",uploadThumbnail:"/report/upload_thumbnails",readThumbnail:"/report/view_thumbnails",uploadReport:"/report/import",downloadReport:"/report/export"},filesArray:[],filesShowArray:[],validateError:"",currentTab:"myFolder",private:"myFolder",sortVal:"asc",lengthLimitTimer:!0,opLock:!0}},computed:{leftMenuShow:function(){var e=!0;return this.curFolder[this.fieldObj.pid]&&"0"!==this.curFolder[this.fieldObj.pid]&&(e=!1),e},leftNavShow:function(){var e=!1;return this.curFolder[this.fieldObj.pid]&&"0"!==this.curFolder[this.fieldObj.pid]&&(e=!0),e},loadingSet:function(){return{show:this.loadingState}},fieldObj:function(){var e="zh"===this._i18n.locale,t={};return"myFolder"===this.currentTab?t={name:e?"model_clname":"model_flname",id:"model_id",type:"model_type",pid:"parent_id",rootid:"root_id"}:"sharedFolder"===this.currentTab?t={name:e?"share_clname":"share_flname",id:"share_id",type:"share_showtype",pid:"share_parentid",sign:"sign",rootid:"share_rootid"}:"modelFun"===this.currentTab?t={name:e?"template_clname":"template_flname",id:"template_id",type:"template_showtype",pid:"template_parentid",sign:"sign",rootid:"template_rootid"}:"recycleBin"===this.currentTab&&(t={name:e?"res_clname":"res_flname",id:"res_id",type:"res_type",pid:"res_parentid",rootid:"root_id"}),t}},watch:{curFolder:function(){this.apartData(this.curFolder)},curImg:function(e){var t=this;this.curImg&&this.filesShowArray.forEach((function(i,a){if(i[t.fieldObj.id]===e){var o=t._.cloneDeep(i),r=t.jointImgUrl(!1,e);o.imgObj.src="".concat(r,"?").concat(Math.random()),t.filesShowArray.splice(a,1,o),t.curImg=""}}))}},created:function(){this.askForModelTotalData(this.findRootFolder)},methods:{getIcons:function(e){var t=this,i=[],a=this.fieldObj,o=this.currentTab;return this.isSomeIconShow(e,"delete")&&"s"!==e[a.sign]&&i.push({class:"icon iconfont icon-addimg",click:function(){return t.uploadThumbnail(e)},title:this.$t("dataExplore.thumbnail")}),e[a.type]&&e[a.type].includes("report")&&"modelFun"!==o&&"recycleBin"!==o&&i.push({class:"icon iconfont icon-add-screen",click:function(){return t.toggleBigScreen(!0,e)},title:this.$t("dataExplore.bigScreen")}),e[a.type]&&e[a.type].includes("report")&&"modelFun"===o&&"s"!==e[a.sign]&&i.push({class:"icon iconfont icon-common-edit",click:function(){return t.editMyReport(e)},title:this.$t("dataExplore.edit")}),this.isSomeIconShow(e,"edit")&&i.push({class:"icon iconfont icon-common-edit",click:function(){return t.editMyReport(e)},title:this.$t("dataExplore.edit")}),this.isSomeIconShow(e,"delete")&&e[a.type]&&e[a.type].includes("report")&&"s"!==e[a.sign]&&i.push({class:"icon iconfont icon-bottom",click:function(){return t.downloadReport(e)},title:this.$t("dataExplore.download")}),e[a.type]&&e[a.type].includes("report")&&"modelFun"===o&&"s"!==e[a.sign]&&i.push({class:"icon iconfont icon-recycle",click:function(){return t.delModelFolder(e)},title:this.$t("dataExplore.delete")}),this.isSomeIconShow(e,"delete")&&"modelFun"!==o&&i.push({class:"icon iconfont icon-recycle",click:function(){return t.delModelFolder(e)},title:this.$t("dataExplore.delete")}),i},toggleBigScreen:function(e,t){this.addScreen=e,this.curItem=t},jointImgUrl:function(e,t){return this.$projectName+this.urls.readThumbnail+"/"+t},clearClickEvent:function(){this.curChoosedFiles.length>0&&(this.curChoosedFiles=[])},clickLeftNav:function(e){this.enterFile(e.item,e.event)},clickLeftTab:function(e){switch(e.tab){case"myFolder":case"sharedFolder":case"modelFun":this.changeTab(e.tab);break;case"recycleBin":this.askForRecycleBin()}},clickRightIcons:function(e){switch(e.tab){case"refresh":this.askForModelTotalData(this.findRootFolder);break;case"cross":this.changeFileShowType("flat");break;case"list":this.changeFileShowType("list");break;case"sort":this.sortFiles();break;case"newFolder":this.newFolder();break;case"newReport":this.newReport();break;case"model":this.newModel();break;case"uploadReport":this.uploadReport()}},pressEnter:function(e){e.target.blur()},startChangeFileName:function(t,i){var a=this,r={};if(r=i.fromList?Object(o.a)({},i.file):Object(o.a)({},i),(-1!==this.$moduleRole.indexOf("design")||-1!==this.$moduleRole.indexOf("model"))&&"recycleBin"!==this.currentTab){if(r.sign&&"s"===r.sign)return;this.isFocus||(this.changeNameError="",this.isFocus=!0,this.changeNameFile=r,this.$set(this.changeNameValue,r[this.fieldObj.type].split("_")[1],r[this.fieldObj.name]))}var s=e(t.currentTarget);this._temptarget=s,this.$nextTick((function(){a._temptarget.prevAll("input")[0].focus(),a._temptarget=null}))},changeFileShowType:function(e){this.isFocus||(this.showInList="flat"!==e)},returnToPrivateFirst:function(){this.isFocus||(this.curFolder=this.rootFolder)},restoreFileClick:function(){this.isFocus||this.filesShowArray.length>0&&(this.curPopWindow="restore",this.popWindowOpt.head=this.$t("dataExplore.restore"),this.popWindowOpt.type="confirm",this.popWindowOpt.confirm=this.$t("dataExplore.yes"),this.popWindowOpt.cancel=this.$t("dataExplore.no"),this.popWindowOpt.show=!0,this.curChoosedFiles.length?this.popWindowOpt.content=this.$t("dataExplore.besureRestoreChoosed"):this.popWindowOpt.content=this.$t("dataExplore.besureRestoreAll"))},cleanFileClick:function(){this.isFocus||this.filesShowArray.length>0&&(this.curPopWindow="clean",this.popWindowOpt.show=!0,this.popWindowOpt.head=this.$t("dataExplore.clear"),this.popWindowOpt.type="confirm",this.popWindowOpt.confirm=this.$t("dataExplore.yes"),this.popWindowOpt.cancel=this.$t("dataExplore.no"),this.curChoosedFiles.length?this.popWindowOpt.content=this.$t("dataExplore.besureClearChoosed"):this.popWindowOpt.content=this.$t("dataExplore.besureClearAll"))},blurChangedName:function(e,t){this.blurChangedNameSetTime(e,t)},blurChangedNameSetTime:function(e,t){var i=this,r={},s="",n={};if(e.fromListBlur?(r=Object(o.a)({},e.fromListBlur.file),s=e.fromListBlur.newName,n=Object(o.a)({},e.fromListBlur.currentFolder)):(r=Object(o.a)({},e),s=this.changeNameValue[e[this.fieldObj.type].split("_")[1]].trim(),n=Object(o.a)({},this.curFolder)),!s)return this.changeNameError=this.$t("dataExplore.emptyChangeFolderError"),this.changeNameValue[e[this.fieldObj.type].split("_")[1]]=r[this.fieldObj.name],void t.target.focus();if(s===r[this.fieldObj.name])return this.isFocus=!1,this.changeNameError="",void t.target.focus();this.loadingState="start";var l={};l.type=r[this.fieldObj.type],l.clname=s,l.parentId=n[this.fieldObj.id],l.rootId=n[this.fieldObj.rootid],l.resId=r[this.fieldObj.id],this.$http({url:this.urls.editModelFolderUrl,data:l,method:"put"}).then((function(e){var t;(i.loadingState="finish",e.data.data&&e.data.data instanceof Array&&e.data.data.length>0)&&(i.filesArray=[],(t=i.filesArray).push.apply(t,Object(a.a)(e.data.data)),i.apartData(n),i.changeNameError="",i.isFocus=!1)})).catch((function(e){i.loadingState="error",e&&e.response&&e.response.data&&(i.changeNameError=e.response.data.message,i.changeNameValue[r[i.fieldObj.type].split("_")[1]]=r[i.fieldObj.name],t.target.focus())}))},isSomeIconShow:function(e,t){return"edit"===t?(-1!==this.$moduleRole.indexOf("design")||-1!==this.$moduleRole.indexOf("model"))&&"recycleBin"!==this.currentTab&&"modelFun"!==this.currentTab&&e[this.fieldObj.type]&&e[this.fieldObj.type].includes("report")&&!(e[this.fieldObj.type].includes("share")&&"s"===e[this.fieldObj.sign]):"delete"===t?!(-1===this.$moduleRole.indexOf("design")&&-1===this.$moduleRole.indexOf("model")||"recycleBin"===this.currentTab||e[this.fieldObj.type]&&e[this.fieldObj.type].includes("share")&&"s"===e[this.fieldObj.sign]||"1953619"===e[this.fieldObj.id]):"uploadThumbnail"===t||void 0},changeTab:function(e){this.isFocus||(this.currentTab=e,"myFolder"===e?(this.private="myFolder",this.sortVal="asc"):"sharedFolder"===e?(this.private="sharedFolder",this.sortVal="asc"):"modelFun"===e&&(this.private="modelFun",this.sortVal="asc"),this.askForModelTotalData(this.findRootFolder,!0))},enterFile:function(e,t){this.isFocus||("recycleBin"===this.currentTab?this.chooseFile(e,t):e[this.fieldObj.type].includes("folder")?(this.curFolder=e,this.apartData(this.curFolder),this.fathersList.length=0,this.findFather(e),this.fathersList.push(this.curFolder)):e[this.fieldObj.type].includes("report")&&"modelFun"===this.currentTab?this.editMyReport(e,!0):e[this.fieldObj.type].includes("report")&&this.viewReport(e))},viewReport:function(e){var t="#/view/"+e[this.fieldObj.id];"screen"===e.classify&&(t="#/screen/"+e[this.fieldObj.id]),window.open(this.$openWindowPath+t,"_blank")},findFather:function(e){for(var t=0;t<this.filesArray.length;t++)e[this.fieldObj.pid]===this.filesArray[t][this.fieldObj.id]&&(this.fathersList.unshift(this.filesArray[t]),this.findFather(this.filesArray[t]))},chooseFile:function(e,t){if(clearTimeout(this.dragSetTimeOut),t.ctrlKey||t.metaKey)if(this.curChoosedFiles.includes(e))for(var i=0;i<this.curChoosedFiles.length;i++)this.curChoosedFiles[i][this.fieldObj.id]===e[this.fieldObj.id]&&this.curChoosedFiles.splice(i,1);else this.curChoosedFiles.includes(e)||this.curChoosedFiles.push(e);else this.curChoosedFiles=[],this.curChoosedFiles.includes(e)||this.curChoosedFiles.push(e)},apartData:function(e){var t=e[this.fieldObj.id],i=this.fieldObj.pid;this.filesShowArray=[];for(var a=0;a<this.filesArray.length;a++)if(this.filesArray[a][i]===t){var o=this.filesArray[a],r={src:this.jointImgUrl(!0,o[this.fieldObj.id]),error:o[this.fieldObj.type].includes("report")?this.reportUrl:this.folderUrl,attempt:1};o.imgObj=r,this.filesShowArray.push(o)}},findRootFolder:function(e){this.curFolder[this.fieldObj.pid]&&!e||(this.curFolder=this._.find(this.filesArray,[this.fieldObj.pid,"0"])),this.rootFolder[this.fieldObj.pid]&&!e||(this.rootFolder=this._.find(this.filesArray,[this.fieldObj.pid,"0"]))},askForModelTotalData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this;if(!this.isFocus){this.loadingState="start";var o={};"myFolder"===this.currentTab?o.type="MODEL":"sharedFolder"===this.currentTab?o.type="SHARE":"modelFun"===this.currentTab&&(o.type="TEMPLATE"),this.$http({url:this.urls.analysisModelUrl,params:o,method:"get"}).then((function(o){var r;(i.loadingState="finish",o.data.data&&o.data.data instanceof Array&&o.data.data.length>0)&&(i.filesArray=[],(r=i.filesArray).push.apply(r,Object(a.a)(o.data.data)),i.apartData(i.curFolder),e&&e(t))})).catch((function(e){i.validateError=e.response.data,i.loadingState="error"}))}},askForRecycleBin:function(){var e=this;if(!this.isFocus){this.currentTab="recycleBin",this.loadingState="start";var t={};"myFolder"===this.private?t.type="MODEL":"sharedFolder"===this.private?t.type="SHARE":t.type="TEMPLATE",this.$http({url:this.urls.toReturnRecycle,params:t,method:"get"}).then((function(t){var i;(e.loadingState="finish",t.data.data&&t.data.data instanceof Array)&&(e.filesArray=[],(i=e.filesArray).push.apply(i,Object(a.a)(t.data.data)),e.toRemoveChildren())})).catch((function(t){e.loadingState="error",e.validateError=t.response.data}))}},toRemoveChildren:function(){var e,t=[];this.filesShowArray.length=0,(e=this.filesShowArray).push.apply(e,Object(a.a)(this.filesArray));for(var i=this.fieldObj.id,o=this.fieldObj.pid,r=0;r<this.filesShowArray.length;r++){var s=this.filesShowArray[r],n={src:this.jointImgUrl(!0,s[this.fieldObj.id]),error:s[this.fieldObj.type].includes("report")?this.reportUrl:this.folderUrl,attempt:1};s.imgObj=n;for(var l=0;l<this.filesShowArray.length;l++)this.filesShowArray[l][i]===this.filesShowArray[r][o]&&t.push(this.filesShowArray[r])}for(var c=0;c<this.filesShowArray.length;c++)for(var d=0;d<t.length;d++)this.filesShowArray[c][i]===t[d][i]&&this.filesShowArray.splice(c,1)},handlePopWindow:function(e){if("custom"!==this.popWindowOpt.type&&"confirm"!==this.popWindowOpt.type||"confirm"!==e.type)this.popWindowOpt.show=!1;else{var t="";if("customNewFile"===this.curPopWindow)this.askForNewFolder();else if("confirmDelete"===this.curPopWindow)this.deleteToRecyclebin(this.deleteFile),this.popWindowOpt.show=!1;else if("restore"===this.curPopWindow||"clean"===this.curPopWindow){if(this.curChoosedFiles)for(var i=0;i<this.curChoosedFiles.length;i++)t+=this.curChoosedFiles[i][this.fieldObj.id]+",";t=t.replace(/,$/gi,""),this.deleteOrRestoreFileSend(t),this.popWindowOpt.show=!1}}},deleteOrRestoreFileSend:function(e){var t=this,i={};i.resId=e;var a="",o="";"clean"===this.curPopWindow?(a=this.urls.toClearRecycle,o="delete"):"restore"===this.curPopWindow&&(a=this.urls.toRestoreRecycle,o="put"),"myFolder"===this.private?i.type="MODEL":"sharedFolder"===this.private?i.type="SHARE":i.type="TEMPLATE",this.loadingState="start",this.$http({url:a,data:i,method:o}).then((function(e){t.curChoosedFiles=[],"clean"===t.curPopWindow?e.data||(t.loadingState="finish",t.askForRecycleBin()):"restore"===t.curPopWindow&&(e.data.success?(t.loadingState="finish",t.askForRecycleBin()):(t.popWindowOpt.type="alert",t.popWindowOpt.confirm=t.$t("dataExplore.confirm"),t.popWindowOpt.show=!0,t.popWindowOpt.head=t.$t("dataExplore.hint"),t.popWindowOpt.content=t.$t("dataExplore.existedFiles"),t.loadingState="error",t.curChoosedFiles.length>1&&t.askForRecycleBin()))})).catch((function(e){t.loadingState="error",e&&e.response&&e.response.data&&(t.popWindowOpt.type="alert",t.popWindowOpt.confirm=t.$t("dataExplore.confirm"),t.popWindowOpt.show=!0,t.popWindowOpt.head=t.$t("dataExplore.hint"),t.popWindowOpt.content=t.$t("dataExplore.existedFiles"))}))},deleteToRecyclebin:function(e){var t=this;this.loadingState="start";var i=this.urls.delResToRecycle,a={};a.resId=e[this.fieldObj.id],a.type=e[this.fieldObj.type],this.$http({url:i,data:a,method:"delete"}).then((function(i){t.loadingState="finish",i.data||(t.$delete(t.filesArray,t._.findIndex(t.filesArray,[t.fieldObj.id,e[t.fieldObj.id]])),t.$delete(t.filesShowArray,t._.findIndex(t.filesShowArray,[t.fieldObj.id,e[t.fieldObj.id]]))),t.listChoosed={}})).catch((function(e){t.loadingState="error",t.curPopWindow="alertDelToRecycleError",t.popWindowOpt.type="alert",t.popWindowOpt.head=t.$t("dataExplore.hint"),t.popWindowOpt.style.height="145px",t.popWindowOpt.content=e.response.data.message,t.popWindowOpt.show=!0}))},delModelFolder:function(e){this.isFocus||(this.deleteFile=e,this.curPopWindow="confirmDelete",this.popWindowOpt.type="confirm",this.popWindowOpt.head=this.$t("dataExplore.confirm"),this.popWindowOpt.style.height="145px",this.popWindowOpt.content=this.$t("dataExplore.besureDel"),this.popWindowOpt.show=!0)},uploadThumbnail:function(e){this.curItem=e,this.$refs.fileInput.click()},onUpload:function(e){var t=this,i=this,a=e.target.files,o=new FormData;o.append("file",a[0]),o.append("reportId",this.curItem[this.fieldObj.id]),e.target.value="",this.$http({url:this.urls.uploadThumbnail,data:o,method:"post",headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data&&e.data.data&&e.data.data.imgflag&&(i.curImg=e.data.data.imgflag)})).catch((function(e){t.$notify({group:"foo-dataexporler",title:t.$t("public.warnInfo"),text:e.response.data.message,type:"error"})}))},downloadReport:function(e){window.location.href="".concat(this.$projectName).concat(this.urls.downloadReport,"?resId=").concat(e[this.fieldObj.id],"&resType=").concat(e[this.fieldObj.type],"&").concat(this.$semfTokenKey,"=").concat(this.$semfToken)},uploadReport:function(){this.$refs.fileReportInput.click()},onReportUpload:function(e){var t=this,i=this,a=e.target.files,o=new FormData,r="",s="";"myFolder"===this.currentTab?(r="private",s=this.curFolder.model_id):"sharedFolder"===this.currentTab?(r="share",s=this.curFolder.share_id):"modelFun"===this.currentTab&&(r="template",s=this.curFolder.template_id),o.append("file",a[0]),o.append("folderType",r),o.append("parentId",s),e.target.value="",this.$http({url:this.urls.uploadReport,data:o,method:"post",headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data&&e.data.success&&i.askForModelTotalData(t.findRootFolder)})).catch((function(e){t.loadingState="error",e&&e.response&&e.response.data&&l.default.notify({group:"foo-dataexporler",title:"error",text:e.response.data.message,type:"error"})}))},editMyReport:function(e,t){if(!this.isFocus){var i="#/design/";if("screen"===e.classify&&(i="#/make/screen/"),t){var a=i+e[this.fieldObj.id]+"?template_showtype="+e[this.fieldObj.type];window.open(this.$openWindowPath+a,"_blank")}else{var o=i+e[this.fieldObj.id];window.open(this.$openWindowPath+o,"_blank")}}},newReport:function(){if(!this.isFocus){window.open(this.$openWindowPath+"#/design","_blank")}},newModel:function(){if(!this.isFocus){window.open(this.$openWindowPath+"#/model","_blank")}},newFolder:function(){this.isFocus||(this.curPopWindow="customNewFile",this.popWindowOpt.type="custom",this.popWindowOpt.head=this.$t("dataExplore.newFolder"),this.popWindowOpt.style.height="230px",this.popWindowOpt.show=!0,this.newFolderName=this.$t("dataExplore.newFolder"),this.newFolderError="")},reNewFolder:function(){this.newFolderError=""},getListChoosed:function(e){this.listChoosed=e.choosed},askForNewFolder:function(){var e=this,t=this;if("model_report"!==this.listChoosed.model_type){if(this.newFolderName){var i={},o=this.listChoosed[this.fieldObj.id];i=this.showInList?void 0===o?this.curFolder:this.listChoosed:this.curFolder,this.loadingState="start";var r={};"sharedFolder"!==this.private?r.type="model_folder":r.type="share_folder",r.clname=this.newFolderName.trim(),r.parentId=i[this.fieldObj.id],r.rootId=i[this.fieldObj.rootid],r.clname?this.$http({url:this.urls.addFolderUrl,data:r,method:"post"}).then((function(e){var i;(t.loadingState="finish",e.data.data&&e.data.data instanceof Array&&e.data.data.length>0)&&(t.filesArray=[],(i=t.filesArray).push.apply(i,Object(a.a)(e.data.data)),t.apartData(t.curFolder),t.popWindowOpt.show=!1,t.newFolderError="")})).catch((function(i){t.loadingState="error",i&&i.response&&i.response.data&&(e.newFolderError=i.response.data.message)})):(t.newFolderError=t.$t("dataExplore.emptyNewFolderError"),t.loadingState="finish")}}else l.default.notify({group:"foo-dataexporler",title:this.$t("public.errorInfo"),text:this.$t("dataExplore.newSelectFolderFirst"),type:"error"})},sortFiles:function(){var e=this;if(!this.isFocus){var t=function(t){return function(i,a){return"asc"===e.sortVal?i[t].localeCompare(a[t],"zh-CN",{sensitivity:"accent"}):"desc"===e.sortVal?a[t].localeCompare(i[t],"zh-CN",{sensitivity:"accent"}):void 0}};this.showInList?this.filesArray.sort(t(this.fieldObj.name)):this.filesShowArray.sort(t(this.fieldObj.name)),this.sortVal="asc"===this.sortVal?"desc":"asc"}},sortABC:function(e){return function(t,i){var a=t[e],o=i[e];return isNaN(Number(a))||isNaN(Number(o))||(a=Number(a),o=Number(o)),a<o?-1:a>o?1:0}},lengthLimit:function(e){if(!this.opLock&&e.target.value.length>49&&(e.target.value=e.target.value.substr(0,50),this.lengthLimitTimer)){var t=this;this.lengthLimitTimer=!1,setTimeout((function(){t.lengthLimitTimer=!0}),2e3),l.default.notify({group:"foo-dataexporler",title:"错误提示",text:"文件名称不能超过50字符",type:"error"})}},lengthComposition:function(e,t){switch(e){case"start":this.opLock=!0;break;case"end":this.opLock=!1,this.lengthLimit(t)}}},directives:{focus:function(e){e.focus()},focusS:{inserted:function(e){e.focus()}}}}}).call(this,i("1157"))},e920:function(e,t,i){"use strict";i("99af"),i("4de4"),i("7db0"),i("4160"),i("caad"),i("45fc"),i("2532"),i("159b");var a=i("5530"),o=(i("96cf"),i("1da1")),r=i("f9e0"),s={name:"addScreenDrawer",props:{drawerVisible:Boolean,closeDrawer:Function,openDrawer:Function},data:function(){return{curItem:{},curScreenImg:"",themes:[],layouts:[],searchValue:"",reportUrl:i("7b17"),folderUrl:i("aabe"),currentTemp:void 0,imgDrawerVisible:!1,urls:{uploadThumbnail:"/report/upload_thumbnails",readThumbnail:"/report/view_thumbnails"}}},computed:{nameAttr:function(){return"zh"===this._i18n.locale?"template_clname":"template_flname"},allTemplate:function(){return this.themesFiltered.concat(this.layoutsFiltered)},themesFiltered:function(){var e=this;return this.themes.filter((function(t){return!!t[e.nameAttr].includes(e.searchValue)}))},layoutsFiltered:function(){var e=this;return this.layouts.filter((function(t){return!!t[e.nameAttr].includes(e.searchValue)}))},tabs:function(){return[{key:"all",title:this.$t("dataExplore.allDefault"),data:this.allTemplate},{key:"layout",title:this.$t("dataExplore.layoutTemplate"),data:this.layoutsFiltered},{key:"theme",title:this.$t("dataExplore.themeTemplate"),data:this.themesFiltered}]}},methods:{getTemplate:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,o,s,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("report/folder",{params:{type:"TEMPLATE",classify:"screen"}});case 2:i=t.sent,a=i.data.data.find((function(e){return"10000000001"===e.pkid})),o=i.data.data.find((function(e){return"10000000002"===e.pkid})),i.data.data.forEach((function(t){t.imgObj=e.getImg(t)})),a&&(s=Object(r.f)(i.data.data,"pkid","template_parentid",a),e.layouts=s[0].children),o&&(n=Object(r.f)(i.data.data,"pkid","template_parentid",o),e.themes=n[0].children);case 8:case"end":return t.stop()}}),t)})))()},onSearch:function(e){this.searchValue=e.target.value},getImg:function(e){return{src:"".concat(this.$projectName,"/report/view_thumbnails/").concat(e.template_id,"?").concat(Math.random()),attempt:1,error:e.template_showtype.includes("report")?this.reportUrl:this.folderUrl}},openImgDrawer:function(e){this.currentTemp=e,this.imgDrawerVisible=!0,this.closeDrawer()},closeImgDrawer:function(){this.imgDrawerVisible=!1,this.openDrawer()},uploadThumbnail:function(e){this.curItem=e,this.$refs.fileInput.click()},onUpload:function(e){var t=this,i=e.target.files,a=new FormData;a.append("file",i[0]),a.append("reportId",this.curItem.template_id),e.target.value="",this.$http({url:this.urls.uploadThumbnail,data:a,method:"post",headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data&&e.data.data&&e.data.data.imgflag&&(t.curScreenImg=e.data.data.imgflag)}))},jointImgUrl:function(e,t){return this.$projectName+this.urls.readThumbnail+"/"+t},create:function(e){if(e){var t=e||this.currentTemp;window.open("#/make/screen/".concat(t.template_id,"?template_showtype=").concat(t.template_showtype))}else window.open("#/make/screen")}},watch:{curScreenImg:function(e){var t=this;if(this.curScreenImg){var i,o,r;this.layouts.some((function(s,n){if(s.template_id===e){var l="".concat(t.jointImgUrl(!1,e),"?").concat(Math.random());return o="layouts",i=n,(r=Object(a.a)(Object(a.a)({},s),{},{src:l})).imgObj=t.getImg(s),!0}})),this.themes.some((function(s,n){if(s.template_id===e){"".concat(t.$projectName,"/report/view_thumbnails/").concat(s.template_id,"?").concat(Math.random());return o="themes",i=n,(r=Object(a.a)({},s)).imgObj=t.getImg(s),!0}})),this.$set(this[o],i,r),this.curScreenImg=""}}}},n=(i("0f2c"),i("2877")),l=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-screen-drawer"},[i("drawer",{staticClass:"list-drawer",attrs:{width:"780px",visible:e.drawerVisible,footerBtns:[],title:e.$t("dataExplore.largeScreenProduction")},on:{close:e.closeDrawer},scopedSlots:e._u([{key:"content",fn:function(){return[i("tabs",{staticClass:"template-tabs",attrs:{forceRender:!0}},e._l(e.tabs,(function(t){return i("tabpane",{key:t.key,staticClass:"template",attrs:{label:t.title}},["all"===t.key?i("div",{staticClass:"template-item-wrapper"},[i("div",{staticClass:"template-img-add",on:{click:function(t){return e.create()}}},[i("i",{staticClass:"iconfont inlet icon-new-model"})])]):e._e(),e._l(t.data,(function(t){return i("div",{key:t.pkid,staticClass:"template-item-wrapper"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.getImg(t),expression:"getImg(item)"}],staticClass:"template-img",on:{click:function(i){return e.create(t)}}}),i("div",{staticClass:"template-name"},[i("wordBreaker",{attrs:{word:t[e.nameAttr]}}),i("div",[i("i",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("dataExplore.thumbnail"),expression:"$t('dataExplore.thumbnail')",modifiers:{bottom:!0}}],staticClass:"iconfont icon-setting",on:{click:function(i){return e.uploadThumbnail(t)}}}),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t[e.nameAttr],expression:"item[nameAttr]",modifiers:{bottom:!0}}],staticClass:"iconfont icon-view",on:{click:function(i){return e.openImgDrawer(t)}}})])],1)])}))],2)})),1)]},proxy:!0}])},[i("template",{slot:"titleRight"},[i("ipt",{ref:"search",staticStyle:{position:"absolute",right:"54px",top:"12px",width:"200px"},attrs:{type:"search",placeholder:e.$t("dataExplore.pleaseEnterTheTemplateName")},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),i("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",value:""},on:{change:e.onUpload}})],1)],2),e.currentTemp?i("drawer",{staticClass:"img-drawer",attrs:{footerBtns:[],width:"780px",hideHeader:!0,visible:e.imgDrawerVisible},on:{close:e.closeImgDrawer}},[i("div",{staticClass:"img-drawer-header"},[i("i",{staticClass:"iconfont icon-left-arrow",staticStyle:{cursor:"pointer"},on:{click:e.closeImgDrawer}}),i("span",{staticClass:"img-drawer-header-template-name"},[e._v(" "+e._s(e.currentTemp[e.nameAttr])+" ")]),i("btn",{attrs:{type:"primary"},on:{click:e.create}},[e._v(" "+e._s(e.$t("dataExplore.create"))+" ")])],1),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.getImg(e.currentTemp),expression:"getImg(currentTemp)"}],staticClass:"img-drawer-body"})]):e._e()],1)}),[],!1,null,null,null);t.a=l.exports},e95d:function(e,t,i){},f23a:function(e,t,i){"use strict";(function(e){i("caad"),i("a434"),i("ac1f"),i("2532"),i("1276"),i("498a");var a=i("5530");t.a={name:"listtree",props:{isTrans:{type:Boolean,default:!0},treeT:{type:Object},sourceData:{type:Array,default:[]},toNext:{default:!1},isFocus:{default:!1},changeNameFile:{type:Object},changeNameValue:{type:Object},changeNameError:{type:String}},data:function(){return{clickEvent:null,trueChangeNameValue:{},choosed:{},openName:[],defaultSet:{id:"model_id",name:"model_clname",pId:"parent_id",initID:"0"}}},watch:{changeNameValue:{handler:function(e){this.trueChangeNameValue=e},deep:!0},trueChoosed:function(){this.trueChoosed&&this.$emit("singleChoosed",{choosed:this.trueChoosed})}},computed:{trueOpenName:function(){return this.toNext?this.toNext.openName:this.openName},trueChoosed:function(){return this.toNext?this.toNext.choosed:this.choosed},treeData:function(){var e=this.sourceData;if(this.isTrans){var t=this.sourceData;e=this.transTreeData(t)}return e},defaultTreeT:function(){return e.extend(!0,{},this.defaultSet,this.treeT)}},methods:{findFather:function(e){for(var t=0;t<this.sourceData.length;t++)if(e[this.defaultTreeT.pId]===this.sourceData[t][this.defaultTreeT.id])return this.sourceData[t]},changedNameBlur:function(e){if(this.toNext)this.$emit("getFromNextData",{fromListBlur:{file:e,newName:this.trueChangeNameValue[e[this.defaultTreeT.type].split("_")[1]]}});else{var t=this.findFather(e);this.$emit("changeModelBlur",{fromListBlur:{file:e,newName:this.trueChangeNameValue[e[this.defaultTreeT.type].split("_")[1]].trim(),currentFolder:t}})}},getFromNextData:function(e){if(this.toNext)this.$emit("getFromNextData",e);else if(e.choosed&&(this.choosed=Object(a.a)({},e.choosed)),e.openItem&&this.handleToggle(this.openName,e.openItem),e.delItem&&this.$emit("delModel",e.delItem),e.changeItem&&this.$emit("changeModel",{file:e.changeItem,fromList:!0}),e.fromListBlur){var t=this.findFather(e.fromListBlur.file);e.fromListBlur.currentFolder=t,this.$emit("changeModelBlur",{fromListBlur:e.fromListBlur})}},startChangeName:function(e){clearTimeout(this.clickEvent),this.toNext?this.$emit("getFromNextData",{changeItem:e}):this.$emit("changeModel",{file:e,fromList:!0})},delModel:function(e){this.isFocus||(this.toNext?this.$emit("getFromNextData",{delItem:e}):this.$emit("delModel",e))},editMyReport:function(e,t){if(this.isFocus||t){var i="#/design/"+e.template_id+"?template_showtype="+e.template_showtype;window.open(this.$openWindowPath+i,"_blank")}else{var a="#/design/"+e[this.defaultTreeT.id];window.open(this.$openWindowPath+a,"_blank")}},toggle:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.isFocus||(this.toNext?this.$emit("getFromNextData",{choosed:e}):this.choosed=Object(a.a)({},e),i?"node"===i&&(clearTimeout(this.clickEvent),this.clickEvent=setTimeout((function(){t.toggleSetTimeout(e)}),300)):this.toggleSetTimeout(e))},toggleSetTimeout:function(e){e[this.defaultTreeT.type].includes("report")&&!e[this.defaultTreeT.type].includes("template")?this.viewReport(e):e[this.defaultTreeT.type].includes("folder")?this.toNext?this.$emit("getFromNextData",{openItem:e[this.defaultTreeT.id]}):this.handleToggle(this.trueOpenName,e[this.defaultTreeT.id]):e[this.defaultTreeT.type].includes("template")&&this.editMyReport(e,!0)},viewReport:function(e){var t;t="#/view/"+e[this.defaultTreeT.id],window.open(this.$openWindowPath+t,"_blank")},handleToggle:function(e,t){if(e.includes(t))for(var i=0;i<e.length;i++)t===e[i]&&this.openName.splice(i,1);else this.openName.push(t)},transTreeData:function(e){if(e.length>0){var t=this.defaultTreeT.initID;return this.findChild(t)}return[]},findChild:function(e){for(var t=[],i=this.sourceData,o=i.length,r=0;r<o;r++)if(i[r][this.defaultTreeT.pId]===e){var s=Object(a.a)({},i[r]);s.children=this.findChild(s[this.defaultTreeT.id]),t.push(s)}return t}},directives:{focus:{inserted:function(e){e.focus()}}}}}).call(this,i("1157"))},fe7d:function(e,t,i){"use strict";var a=i("d6a7");i.n(a).a}}]);